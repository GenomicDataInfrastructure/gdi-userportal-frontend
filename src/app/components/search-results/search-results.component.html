<div class="flex flex-col mt-10 justify-evenly items-center md:flex-row">
  <div class="basis-1/4"></div>
  <div class="basis-1/2">
    <app-search></app-search>
  </div>
  <div class="basis-1/4 mb-10 md:mb-0 md:mt-2">
    <label for="select-sort-by">Sort by:</label>
    <select
      [(ngModel)]="currentSortingField"
      (change)="onSortSelectChange($event)"
      id="select-sort-by"
      class="rounded-md border-2 ml-2 mb-3 select-sort-by"
    >
      <option value="score desc">Relevance</option>
      <option value="metadata_created desc">Last created</option>
      <option value="metadata_modified desc">Last modified</option>
    </select>
  </div>
</div>
<div class="flex justify-center flex-col items-center lg:flex-row">
  <app-filter
    class="mx-3"
    label="Publishers"
    ckanProp="publisher_name"
    [parentFilters]="currentFilters"
    (filterEmitter)="onReceiveFilter($event)"
  ></app-filter>
  <app-filter
    class="mx-3"
    label="Catalogues"
    ckanProp="organization"
    [parentFilters]="currentFilters"
    (filterEmitter)="onReceiveFilter($event)"
  ></app-filter>
  <app-filter
    class="mx-3"
    label="Themes"
    ckanProp="theme"
    [parentFilters]="currentFilters"
    (filterEmitter)="onReceiveFilter($event)"
  ></app-filter>
  <app-filter
    class="mx-3"
    label="Keywords"
    ckanProp="tags"
    [parentFilters]="currentFilters"
    (filterEmitter)="onReceiveFilter($event)"
  ></app-filter>
  <button
    *ngIf="currentFilterQuery"
    class="bg-[#7B1C58] hover:bg-[#480B37] text-white shadow-md font-bold px-6 h-14 mx-10 mb-6 rounded"
    (click)="onClearFilter()"
  >
    Clear Filters
  </button>
</div>
<div class="flex flex-col md:flex-row p-10">
  <div class="flex flex-col mx-10">
    <mat-card
      *ngFor="let item of results"
      class="p-6 rounded-md mb-10 mx-5 card"
      (click)="onSelectItem(item)"
    >
      <mat-card-header>
        <mat-card-title>{{ item.title }}</mat-card-title>
        <mat-card-subtitle>{{ item.organization }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        {{ item.description }}
      </mat-card-content>
      <mat-card-footer class="card-footer-content">
        Last updated {{ item.modified | date : "dd MMMM yyyy" }}
      </mat-card-footer>
    </mat-card>

    <div>
      <mat-paginator
        [length]="totalResults"
        [pageSize]="pageSize"
        [pageSizeOptions]="pageSizeOptions"
        [pageIndex]="currentPage"
        (page)="handlePageEvent($event)"
      >
      </mat-paginator>
    </div>
  </div>
</div>
